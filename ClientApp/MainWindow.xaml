<Window
    x:Class="ClientApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Кулинарный помощник - ClientApp"
    Width="900"
    Height="720"
    WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#2C3E50" />
            <Setter Property="Margin" Value="0,0,0,10" />
        </Style>

        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3498DB" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Margin" Value="5" />
        </Style>

        <Style
            x:Key="DisconnectButtonStyle"
            BasedOn="{StaticResource ButtonStyle}"
            TargetType="Button">
            <Setter Property="Background" Value="#E74C3C" />
        </Style>

        <Style
            x:Key="ConnectButtonStyle"
            BasedOn="{StaticResource ButtonStyle}"
            TargetType="Button">
            <Setter Property="Background" Value="Green" />
        </Style>
    </Window.Resources>


    <Grid Margin="15" Background="#F8F9FA">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="10" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0">
            <TextBlock Style="{StaticResource HeaderTextStyle}" Text="Выбор продуктов" />
            <Border
                Margin="0,0,0,15"
                Padding="10"
                Background="White"
                BorderBrush="#DDD"
                BorderThickness="1"
                CornerRadius="5">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,5"
                        FontWeight="SemiBold"
                        Foreground="#555"
                        Text="Введите порт для подключения:" />
                    <TextBox
                        x:Name="PortTextBox"
                        Height="35"
                        Padding="5"
                        VerticalContentAlignment="Center"
                        BorderBrush="#CCC"
                        BorderThickness="1"
                        FontSize="14" />
                </StackPanel>
            </Border>

            <Border
                Margin="0,0,0,15"
                Padding="10"
                Background="White"
                BorderBrush="#DDD"
                BorderThickness="1"
                CornerRadius="5">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,10"
                        FontWeight="SemiBold"
                        Foreground="#555"
                        Text="Выберите продукты:" />
                    <TextBox
                        x:Name="SearchTextBox"
                        Height="30"
                        Margin="0,0,0,10"
                        Padding="5"
                        BorderBrush="#CCC"
                        BorderThickness="1"
                        FontSize="12"
                        TextChanged="SearchTextBox_TextChanged" />

                    <ListBox
                        x:Name="ProductsListBox"
                        Height="250"
                        BorderThickness="0"
                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Margin="2,5"
                                    Content="{Binding Name}"
                                    FontSize="13"
                                    Foreground="#333"
                                    IsChecked="{Binding IsSelected}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <StackPanel
                Margin="0,10,0,0"
                HorizontalAlignment="Center"
                Orientation="Horizontal">
                <Button
                    x:Name="GetRecipeButton"
                    Click="GetRecipeButton_Click"
                    Content="🥘 Получить рецепт"
                    IsEnabled="False"
                    Style="{StaticResource ButtonStyle}" />

                <Button
                    x:Name="ResetButton"
                    Background="#95A5A6"
                    Click="ResetButton_Click"
                    Content="🔄 Сбросить"
                    IsEnabled="False"
                    Style="{StaticResource ButtonStyle}" />
            </StackPanel>
            <Button
                x:Name="StartServerButton"
                Margin="0,15,0,0"
                Click="ConnectButton_Click"
                Content="🔌 Подключиться к серверу"
                Style="{StaticResource ConnectButtonStyle}" />
            <Button
                x:Name="StopServerButton"
                Margin="0,15,0,0"
                Click="DisconnectButton_Click"
                Content="🔌 Отключиться от сервера"
                IsEnabled="False"
                Style="{StaticResource DisconnectButtonStyle}" />
        </StackPanel>

        <Rectangle
            Grid.Column="1"
            Width="1"
            HorizontalAlignment="Center"
            Fill="#DDD" />

        <StackPanel Grid.Column="2" Margin="15,0,0,0">
            <TextBlock Style="{StaticResource HeaderTextStyle}" Text="Рецепт приготовления" />
            <Border
                Margin="0,0,0,15"
                Padding="10"
                HorizontalAlignment="Center"
                Background="White"
                BorderBrush="#DDD"
                BorderThickness="1"
                CornerRadius="5">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,5"
                        HorizontalAlignment="Center"
                        FontWeight="SemiBold"
                        Foreground="#555"
                        Text="Изображение блюда:" />
                    <Image
                        x:Name="DishImage"
                        Width="300"
                        Height="180"
                        Source="{Binding DishImageSource}"/>
                </StackPanel>
            </Border>
            <Border
                Padding="15"
                Background="White"
                BorderBrush="#DDD"
                BorderThickness="1"
                CornerRadius="5">
                <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                    <TextBlock
                        x:Name="RecipeTextBlock"
                        FontSize="14"
                        Foreground="#333"
                        TextWrapping="Wrap">
                        <Run Text="Здесь будет отображен рецепт приготовления на основе выбранных продуктов. " />
                        <LineBreak />
                        <Run Text="Выберите продукты и нажмите 'Получить рецепт'." />
                    </TextBlock>
                </ScrollViewer>
            </Border>
            <Border
                x:Name="ConnectionStatusBorder"
                Margin="0,10,0,0"
                Padding="8,5"
                Background="White"
                BorderBrush="#DDD"
                BorderThickness="1"
                CornerRadius="5">
                <StackPanel Orientation="Horizontal">
                    <Ellipse
                        x:Name="ellipse"
                        Width="10"
                        Height="10"
                        Margin="0,0,5,0"
                        Fill="Black" />
                    <TextBlock
                        x:Name="ConnectionStatusText"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Foreground="Black"
                        Text="Нет подключения к серверу" />
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</Window>